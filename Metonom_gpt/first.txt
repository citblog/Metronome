#include <avr/io.h>
#include <avr/interrupt.h>

// Определение частоты тактирования
#define F_CPU 4800000UL

// Определение частоты звука
#define SOUND_FREQUENCY 4000

// Вычисление необходимого делителя для достижения заданной частоты звука
#define PRESCALER ((F_CPU / (2 * SOUND_FREQUENCY)) - 1)

int main(void) {
    // Настройка порта для генерации звука
    DDRB |= (1 << PB1);

    // Настройка таймера
    TCCR1B |= (1 << WGM12); // Выбор режима CTC (Clear Timer on Compare)
    TCCR1B |= (1 << CS10) | (1 << CS11); // Установка предделителя на 64
    OCR1A = PRESCALER; // Установка значения для генерации нужной частоты

    // Включение прерывания по совпадению таймера с регистром сравнения
    TIMSK |= (1 << OCIE1A);

    // Включение глобального разрешения прерываний
    sei();

    while (1) {
        // Ваш код основной программы
    }

    return 0;
}

// Обработчик прерывания
ISR(TIMER1_COMPA_vect) {
    // Инвертирование состояния пина для генерации звука
    PORTB ^= (1 << PB1);
}
